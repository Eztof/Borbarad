:root{
  /* Borbaradianisches Dark-Theme */
  --bg:#09080b; 
  --panel:#141017; 
  --muted:#a68aa0; 
  --text:#f1e6ee; 
  --accent:#cc4455; 
  --accent2:#ffb86b; 
  --good:#4cd4a8; 
  --bad:#ef476f;

  /* Linien/Umrandungen kräftiger */
  --line:#6b2431;          /* Hauptlinie (kräftig) */
  --line-soft:#3a1720;     /* dezente Gitterlinien */
}
*{box-sizing:border-box}
html,body{height:100%; margin:0; overflow-x:hidden; /* <<< verhindert globale Horizontal-Scrollbars */}
body{background:var(--bg);color:var(--text);font:16px/1.4 system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
.topbar{position:sticky;top:0;z-index:10;display:flex;gap:16px;align-items:center;justify-content:space-between;padding:10px 16px;background:#100b11;border-bottom:2px solid var(--line)}
.brand{font-weight:700;letter-spacing:.3px}
.menu a{color:var(--muted);text-decoration:none;margin:0 8px;padding:6px 10px;border-radius:10px;border:1px solid transparent}
.menu a:hover,.menu a.active{background:#1d141c;color:var(--text);border-color:var(--line)}
.authbox{display:flex;gap:8px;align-items:center}

.btn{background:var(--accent);color:#1a0b0f;border:1px solid #ff8aa6;padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:700}
.btn.secondary{background:#1a1218;color:var(--text);border-color:var(--line)}
.btn.warn{background:#ef476f;color:white;border-color:#ff8aa6}
.btn:disabled{opacity:.6;cursor:not-allowed}

.input,select,textarea{width:100%;background:#140e14;color:var(--text);border:1px solid var(--line);border-radius:12px;padding:8px 10px}
.label{font-size:12px;color:var(--muted);margin-bottom:4px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}

.card{background:var(--panel);border:2px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 0 0 1px #2b0f17 inset}
.app{max-width:1100px;margin:20px auto;padding:10px;display:grid;gap:14px}

.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--line-soft);padding:8px 6px;text-align:left}
.table th{font-size:12px;color:var(--muted);cursor:pointer}
.table tr:hover{background:#1a1218}

.toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between}

.kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;background:#100b11;border:1px solid var(--line-soft);border-radius:8px;padding:2px 6px;color:var(--muted)}
.tags{display:flex;gap:6px;flex-wrap:wrap}
.tag{background:#1c141a;border:1px solid var(--line-soft);border-radius:999px;padding:2px 8px;color:#e2c6d0;font-size:12px}

.grid{display:grid;grid-template-columns:2fr 1fr;gap:14px}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;padding:20px}
.modal .panel{background:var(--panel);border:2px solid var(--line);border-radius:16px;padding:16px;max-width:760px;width:100%}

.empty{padding:30px;text-align:center;color:var(--muted)}
.small{font-size:12px;color:var(--muted)}

.fc, .vis-timeline{background:var(--panel);border:2px solid var(--line);border-radius:12px;padding:8px}

/* --- Heldenliste + Balken --- */
.hero-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.hero-card{background:#120c12;border:1px solid var(--line);border-radius:12px;padding:10px}
.hero-name{font-weight:700;margin:0 0 8px}
.kv{display:flex;gap:8px;align-items:center;justify-content:space-between}
.bar{height:14px;background:#0e0a0e;border:1px solid var(--line);border-radius:999px;overflow:hidden;position:relative}
.bar .fill{height:100%;background:linear-gradient(90deg,var(--good),#61e8b1);width:0%}
.bar.warn .fill{background:linear-gradient(90deg,var(--bad),#ff8aa6)}
.bar .mark{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:11px;color:#ffeaf3}

/* ========= Timeline v2 ========= */
.timeline2{display:flex;flex-direction:column;gap:8px}
.tl2-header{overflow:hidden; /* <<< verhindert Seiten-Overflow durch die Monatsskala */ }
.tl-scale{display:flex;align-items:stretch;border:1px dashed var(--line);border-radius:10px;padding:6px;background:#120c12}
.tl-scale-cell{display:flex;align-items:center;justify-content:center;border-right:1px dashed var(--line-soft)}
.tl-scale-cell:last-child{border-right:0}
.tl-scale-month{font-size:12px;color:#f7d8e2}

.tl2-scroll{overflow-x:auto;overflow-y:hidden;border:1px solid var(--line);border-radius:12px;background:#120c12}
.tl-canvas{position:relative;min-height:220px}

#tl-lanes{display:flex;flex-direction:column;gap:10px;padding:10px}

.lane{display:grid;grid-template-columns:120px 1fr;gap:8px;align-items:flex-start}
.lane-title{font-weight:800;padding:10px 6px;border:1px solid var(--line-soft);border-radius:10px;background:#1a1218}
.lane-track{position:relative;border:1px solid var(--line);border-radius:12px;background:#160f14}
.track-body{position:relative;height:100%}

/* Segmente */
.seg{position:absolute;height:18px;border:2px solid var(--line);border-radius:999px;background:#2a1218;display:flex;align-items:center;justify-content:center;white-space:nowrap;overflow:hidden}
.seg.compact .seg-label{font-size:11px}
.seg .seg-label{padding:0 6px;color:#ffdfe8}
.seg-story{background:#221018}
.seg-nsc{background:#2d1318}
.seg-object{background:#1f1218}
.seg:hover{outline:2px solid var(--accent2);z-index:2}

/* Timeline Controls */
.tl-controls{margin:6px 0 2px 0}
.tl-controls .btn{height:34px}
.tl-controls .input{height:34px}

/* Tag-Suggest (Tagebuch & Tags-Inputs) */
.suggest-wrap{position:relative}
.suggest{position:absolute;left:0;right:0;top:calc(100% + 4px);background:#1a1218;border:1px solid var(--line);border-radius:10px;z-index:6;max-height:200px;overflow:auto}
.suggest-item{padding:6px 8px;cursor:pointer;border-bottom:1px solid var(--line-soft)}
.suggest-item:last-child{border-bottom:0}
.suggest-item:hover{background:#22171f}

/* RTE (Tagebuch) */
.rte-toolbar{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:6px}
.rte-editor{min-height:180px;background:#120c12;border:1px solid var(--line);border-radius:12px;padding:10px}
.rte-view{min-height:80px}
.rte-signature{margin-top:10px;opacity:.8;font-style:italic;text-align:right}

/* Scrollbar nur in Timeline-Bereich sichtbar etwas heller */
.tl2-scroll::-webkit-scrollbar{height:10px}
.tl2-scroll::-webkit-scrollbar-track{background:#0f0a0e;border-radius:10px}
.tl2-scroll::-webkit-scrollbar-thumb{background:#7a3340;border-radius:10px;border:2px solid #0f0a0e}
